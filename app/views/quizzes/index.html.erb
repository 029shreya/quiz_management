<!-- app/views/quizzes/index.html.erb -->

<div class="quiz-index-header">
  <h1 class="page-title">Available Quizzes</h1>
  <p class="page-subtitle">
    <% if user_signed_in? %>
      Choose a quiz and click ‚ÄúStart Quiz‚Äù to begin.
    <% else %>
      Please log in to take a quiz. You can still browse what‚Äôs available.
    <% end %>
  </p>
</div>

<% if @quizzes.present? %>
  <div class="quiz-grid">
    <% @quizzes.each do |quiz| %>
      <div class="quiz-card-item">
        <h2 class="quiz-title">
          <!-- üîπ Preview page -->
          <%= link_to quiz.title, quiz_path(quiz), class: "quiz-link" %>
        </h2>

        <% if quiz.description.present? %>
          <p class="quiz-desc"><%= quiz.description %></p>
        <% end %>

        <div class="quiz-meta-small">
          <span><%= quiz.questions.count %> question<%= "s" if quiz.questions.count != 1 %></span>
        </div>

        <% if user_signed_in? %>
          <!-- üîπ Start quiz => goes to questions page -->
          <%= link_to "Start Quiz",
                      play_quiz_path(quiz),
                      class: "btn btn-primary btn-sm quiz-start-btn" %>
        <% else %>
          <%= link_to "Login to start",
                      new_user_session_path,
                      class: "btn btn-primary btn-sm quiz-start-btn" %>
        <% end %>
      </div>
    <% end %>
  </div>
<% else %>
  <div class="empty-state">
    <p>No quizzes available yet.</p>
    <p class="empty-hint">Please add quizzes from the admin panel.</p>
  </div>
<% end %>
